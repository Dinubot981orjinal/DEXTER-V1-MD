# This workflow will do a clean installation of node dependencies, cache/restore them, build the source code and run tests across different versions of node
# For more information see: https://docs.github.com/en/actions/automating-builds-and-tests/building-and-testing-nodejs

name: Node.js CI

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build:
 session_id: ["eyJub2lzZUtleSI6eyJwcml2YXRlIjp7InR5cGUiOiJCdWZmZXIiLCJkYXRhIjoiOEh4UmRXTmtGNlM5ZkQwblRGQmdRREJNMGQxdFRMM1hQTmFrTUxTdHIwVT0ifSwicHVibGljIjp7InR5cGUiOiJCdWZmZXIiLCJkYXRhIjoiMGVMLzQ1Ly9KdzFVdy9BT1puYjlLN2NGNnFDVUc5K2pqdUJvU3RqZ0lodz0ifX0sInBhaXJpbmdFcGhlbWVyYWxLZXlQYWlyIjp7InByaXZhdGUiOnsidHlwZSI6IkJ1ZmZlciIsImRhdGEiOiI0UDAvVjFHR2ZJQ1hLOC9jcjdpYjlHS2JBcDhua3FZS0k1WWE1SCs5TEV3PSJ9LCJwdWJsaWMiOnsidHlwZSI6IkJ1ZmZlciIsImRhdGEiOiJremZJYnJtdjJMUTdmbHB2N2pVWWdMOHBFMWZaNjdaQm9oM3QwRXh4aXlBPSJ9fSwic2lnbmVkSWRlbnRpdHlLZXkiOnsicHJpdmF0ZSI6eyJ0eXBlIjoiQnVmZmVyIiwiZGF0YSI6ImVNQmlEVHpEYXc4M3luWWJuRk9Hei8wR2c5RG84YVh0UE1jRDVtNUUwMTQ9In0sInB1YmxpYyI6eyJ0eXBlIjoiQnVmZmVyIiwiZGF0YSI6IjBhK3FNbDdya0FYUllBNTZCa2N4c3FIU0ZMSGZ4UG5PRUs0aFVPTVF4Q009In19LCJzaWduZWRQcmVLZXkiOnsia2V5UGFpciI6eyJwcml2YXRlIjp7InR5cGUiOiJCdWZmZXIiLCJkYXRhIjoiOEtYMUU4bE44YWo0T1dhTmRJSXlKNXpaS1ZnMXpHaE85NTN6UUo1L3JIZz0ifSwicHVibGljIjp7InR5cGUiOiJCdWZmZXIiLCJkYXRhIjoiKzNFbkJibmJ5MUdLblUzTzFRWjRLL1luRFJPb3I1dm91ejI5b3dhUU4zcz0ifX0sInNpZ25hdHVyZSI6eyJ0eXBlIjoiQnVmZmVyIiwiZGF0YSI6Im5CZ1h0RDFJT3RPQlQvN3ZMZ1ltQU50Z0JISktYd0ZlcEx4ekxYSXRaYS8ydzNrNWljZCtmTkk4S3VtNHA4UkV6Qm03L2hOZGNYOFB4ZFErNkhva2pBPT0ifSwia2V5SWQiOjF9LCJyZWdpc3RyYXRpb25JZCI6MTc1LCJhZHZTZWNyZXRLZXkiOiI3bTFsU0YyU1U4SzRRUUFHRElqdDZVc1JWSDRra1FCM0ljbmo4bjI5dU04PSIsInByb2Nlc3NlZEhpc3RvcnlNZXNzYWdlcyI6W3sia2V5Ijp7InJlbW90ZUppZCI6Ijk0NzIwMjQ0OTgxQHMud2hhdHNhcHAubmV0IiwiZnJvbU1lIjp0cnVlLCJpZCI6IjE2RUMxMjREQTcwNEUyQTY5OEE0MUUxMjdCMjkyOUE1In0sIm1lc3NhZ2VUaW1lc3RhbXAiOjE3MzIyNDkyNTJ9XSwibmV4dFByZUtleUlkIjozMSwiZmlyc3RVbnVwbG9hZGVkUHJlS2V5SWQiOjMxLCJhY2NvdW50U3luY0NvdW50ZXIiOjEsImFjY291bnRTZXR0aW5ncyI6eyJ1bmFyY2hpdmVDaGF0cyI6ZmFsc2V9LCJkZXZpY2VJZCI6IklDeUtzVGpjUWhLcVowc1M4TXl2REEiLCJwaG9uZUlkIjoiODFlYjUyYWEtMDA0Zi00ZTMyLTgwZTUtZjMzMmFlNDBmMDFlIiwiaWRlbnRpdHlJZCI6eyJ0eXBlIjoiQnVmZmVyIiwiZGF0YSI6IkZ4MXBwWGNKWGVZUm1odHBGd1hFTWMyS1JMWT0ifSwicmVnaXN0ZXJlZCI6dHJ1ZSwiYmFja3VwVG9rZW4iOnsidHlwZSI6IkJ1ZmZlciIsImRhdGEiOiJ1cWNRdlJkWHdrWXZVTGhuclA0M3FBT2JXUnM9In0sInJlZ2lzdHJhdGlvbiI6e30sInBhaXJpbmdDb2RlIjoiNVpENFlFVkQiLCJtZSI6eyJpZCI6Ijk0NzIwMjQ0OTgxOjhAcy53aGF0c2FwcC5uZXQifSwiYWNjb3VudCI6eyJkZXRhaWxzIjoiQ05pSHg1NEhFSk9OZ0xvR0dBRWdBQ2dBIiwiYWNjb3VudFNpZ25hdHVyZUtleSI6Imp3ek5JS0ROQUNRNmp2WTlGdlJvRGhQcVoxeXI5eXFCaE9wbGNwTkVkVG89IiwiYWNjb3VudFNpZ25hdHVyZSI6IlNWN0daRXNZM0UrWjBXbkNxQUo4Ylo1d2RtcHhZS0dTNzNUcFVCUy9hTnNtMlJ3ZE4xaDUxbGt1VU1LYU5WOFV1cnNoYlBVYjl5WXNDMFVoQ3ExaURnPT0iLCJkZXZpY2VTaWduYXR1cmUiOiJqSVIxMk0ydGl6T2NadmlLd0dwb3U1ZnFqYU45L2lTQ0VrUWtjaVQxK3QxTGhJSXlWNjlRMjhzWjhHd0FpaUlnbXFEQ1hWSXgwRXlmN0FMY1E3NWxnQT09In0sInNpZ25hbElkZW50aXRpZXMiOlt7ImlkZW50aWZpZXIiOnsibmFtZSI6Ijk0NzIwMjQ0OTgxOjhAcy53aGF0c2FwcC5uZXQiLCJkZXZpY2VJZCI6MH0sImlkZW50aWZpZXJLZXkiOnsidHlwZSI6IkJ1ZmZlciIsImRhdGEiOiJCWThNelNDZ3pRQWtPbzcyUFJiMGFBNFQ2bWRjcS9jcWdZVHFaWEtUUkhVNiJ9fV0sInBsYXRmb3JtIjoiYW5kcm9pZCIsImxhc3RBY2NvdW50U3luY1RpbWVzdGFtcCI6MTczMjI0OTI0OCwibXlBcHBTdGF0ZUtleUlkIjoiQUFBQUFKZHEifQ=="]
    runs-on: ubuntu-latest

    strategy:
      matrix:
        node-version: [20.x]
        # See supported Node.js release schedule at https://nodejs.org/en/about/releases/

    steps:
    - uses: actions/checkout@v4
    - name: Use Node.js ${{ matrix.node-version }}
      uses: actions/setup-node@v4
      with:
        node-version: ${{ matrix.node-version }}
        cache: 'npm'
    - run: npm ci
    - run: npm run build --if-present
    - run: npm test
